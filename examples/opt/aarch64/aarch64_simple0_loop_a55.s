count .req x2

mov count, #16

        ldr q15, [x1, #0]         // *.
        // gap                    // ..
        // gap                    // ..
        // gap                    // ..
        ldr q21, [x0, #16]        // .*
        // gap                    // ..

        // original source code
        // ldr q15, [x1, #0]       // *.
        // ldr q21, [x0, #16]      // .*

        sub count, count, #1
start:
        ldr q2, [x0, #48]                       // ....*..............
        // gap                                  // ...................
        // gap                                  // ...................
        // gap                                  // ...................
        mul v18.8H, v21.8H, v15.H[0]            // .....*.............
        // gap                                  // ...................
        sqrdmulh v0.8H, v21.8H, v15.H[1]        // ......*............
        // gap                                  // ...................
        ldr q17, [x0]                           // .*.................
        // gap                                  // ...................
        // gap                                  // ...................
        // gap                                  // ...................
        mul v21.8H, v2.8H, v15.H[0]             // ..........*........
        // gap                                  // ...................
        mls v18.8H, v0.8H, v1.H[0]              // .......*...........
        // gap                                  // ...................
        sqrdmulh v0.8H, v2.8H, v15.H[1]         // ...........*.......
        // gap                                  // ...................
        ldr q13, [x0, #32]                      // ...*...............
        // gap                                  // ...................
        // gap                                  // ...................
        // gap                                  // ...................
        sub v2.8H, v17.8H, v18.8H               // ........*..........
        // gap                                  // ...................
        mls v21.8H, v0.8H, v1.H[0]              // ............*......
        // gap                                  // ...................
        add v0.8H, v17.8H, v18.8H               // .........*.........
        // gap                                  // ...................
        str q2, [x0, #16]                       // ................*..
        // gap                                  // ...................
        ldr q15, [x1, #0]                       // e..................
        // gap                                  // ...................
        // gap                                  // ...................
        // gap                                  // ...................
        sub v2.8H, v13.8H, v21.8H               // .............*.....
        // gap                                  // ...................
        str q0, [x0], #4*16                     // ...............*...
        // gap                                  // ...................
        add v0.8H, v13.8H, v21.8H               // ..............*....
        // gap                                  // ...................
        str q2, [x0, #-16]                      // ..................*
        // gap                                  // ...................
        ldr q21, [x0, #16]                      // ..e................
        // gap                                  // ...................
        // gap                                  // ...................
        // gap                                  // ...................
        str q0, [x0, #-32]                      // .................*.
        // gap                                  // ...................

        // original source code
        // ldr q0, [x1, #0]                       // e......|...........e......
        // ldr q8,  [x0]                          // .......|..*...............
        // ldr q9,  [x0, #1*16]                   // .....e.|................e.
        // ldr q10, [x0, #2*16]                   // .......|......*...........
        // ldr q11, [x0, #3*16]                   // .......*..................
        // mul v24.8h, v9.8h, v0.h[0]             // .......|*.................
        // sqrdmulh v9.8h, v9.8h, v0.h[1]         // .......|.*................
        // mls v24.8h, v9.8h, v1.h[0]             // .......|....*.............
        // sub     v9.8h,    v8.8h, v24.8h        // .......|.......*..........
        // add     v8.8h,    v8.8h, v24.8h        // .......|.........*........
        // mul v24.8h, v11.8h, v0.h[0]            // .......|...*..............
        // sqrdmulh v11.8h, v11.8h, v0.h[1]       // .......|.....*............
        // mls v24.8h, v11.8h, v1.h[0]            // .......|........*.........
        // sub     v11.8h,    v10.8h, v24.8h      // .*.....|............*.....
        // add     v10.8h,    v10.8h, v24.8h      // ...*...|..............*...
        // str q8,  [x0], #4*16                   // ..*....|.............*....
        // str q9,  [x0, #-3*16]                  // .......|..........*.......
        // str q10, [x0, #-2*16]                  // ......*|.................*
        // str q11, [x0, #-1*16]                  // ....*..|...............*..

        sub count, count, #1
        cbnz count, start
        ldr q2, [x0, #48]                        // *................
        // gap                                   // .................
        // gap                                   // .................
        // gap                                   // .................
        mul v0.8H, v21.8H, v15.H[0]              // .*...............
        // gap                                   // .................
        sqrdmulh v21.8H, v21.8H, v15.H[1]        // ..*..............
        // gap                                   // .................
        sqrdmulh v29.8H, v2.8H, v15.H[1]         // ......*..........
        // gap                                   // .................
        mul v2.8H, v2.8H, v15.H[0]               // ....*............
        // gap                                   // .................
        ldr q18, [x0]                            // ...*.............
        // gap                                   // .................
        // gap                                   // .................
        // gap                                   // .................
        mls v0.8H, v21.8H, v1.H[0]               // .....*...........
        // gap                                   // .................
        mls v2.8H, v29.8H, v1.H[0]               // .........*.......
        // gap                                   // .................
        ldr q1, [x0, #32]                        // .......*.........
        // gap                                   // .................
        // gap                                   // .................
        // gap                                   // .................
        sub v8.8H, v18.8H, v0.8H                 // ........*........
        // gap                                   // .................
        add v18.8H, v18.8H, v0.8H                // ..........*......
        // gap                                   // .................
        add v21.8H, v1.8H, v2.8H                 // ..............*..
        // gap                                   // .................
        str q8, [x0, #16]                        // ...........*.....
        // gap                                   // .................
        sub v1.8H, v1.8H, v2.8H                  // ............*....
        // gap                                   // .................
        str q18, [x0], #4*16                     // .............*...
        // gap                                   // .................
        // gap                                   // .................
        // gap                                   // .................
        str q21, [x0, #-32]                      // ................*
        // gap                                   // .................
        // gap                                   // .................
        // gap                                   // .................
        str q1, [x0, #-16]                       // ...............*.
        // gap                                   // .................

        // original source code
        // ldr q2, [x0, #48]                     // *................
        // mul v18.8H, v21.8H, v15.H[0]          // .*...............
        // sqrdmulh v0.8H, v21.8H, v15.H[1]      // ..*..............
        // ldr q17, [x0]                         // .....*...........
        // mul v21.8H, v2.8H, v15.H[0]           // ....*............
        // mls v18.8H, v0.8H, v1.H[0]            // ......*..........
        // sqrdmulh v0.8H, v2.8H, v15.H[1]       // ...*.............
        // ldr q13, [x0, #32]                    // ........*........
        // sub v2.8H, v17.8H, v18.8H             // .........*.......
        // mls v21.8H, v0.8H, v1.H[0]            // .......*.........
        // add v0.8H, v17.8H, v18.8H             // ..........*......
        // str q2, [x0, #16]                     // ............*....
        // sub v2.8H, v13.8H, v21.8H             // .............*...
        // str q0, [x0], #4*16                   // ..............*..
        // add v0.8H, v13.8H, v21.8H             // ...........*.....
        // str q2, [x0, #-16]                    // ................*
        // str q0, [x0, #-32]                    // ...............*.
