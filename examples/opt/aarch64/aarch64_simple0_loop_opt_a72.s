count .req x2

mov count, #16

        ldr q16, [x0, #48]                     // *......
        ldr q6, [x1, #0]                       // .*.....
        // gap                                 // .......
        ldr q26, [x0, #16]                     // ..*....
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        sqrdmulh v4.8H, v16.8H, v6.H[1]        // ...*...
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        mul v22.8H, v16.8H, v6.H[0]            // ....*..
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        sqrdmulh v8.8H, v26.8H, v6.H[1]        // .....*.
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        // gap                                 // .......
        mls v22.8H, v4.8H, v1.H[0]             // ......*
        // gap                                 // .......
        // gap                                 // .......

        // original source code
        // ldr q13, [x0, #48]                   // *......
        // ldr q6, [x1, #0]                     // .*.....
        // ldr q26, [x0, #16]                   // ..*....
        // sqrdmulh v9.8H, v13.8H, v6.H[1]      // ...*...
        // mul v22.8H, v13.8H, v6.H[0]          // ....*..
        // sqrdmulh v8.8H, v26.8H, v6.H[1]      // .....*.
        // mls v22.8H, v9.8H, v1.H[0]           // ......*

        sub count, count, #1
start:
        mul v12.8H, v26.8H, v6.H[0]            // .....*.............
        ldr q13, [x0, #112]                    // ....e..............
        ldr q6, [x1, #0]                       // e..................
        ldr q4, [x0, #32]                      // ...*...............
        ldr q26, [x0, #80]                     // ..e................
        // gap                                 // ...................
        ldr q14, [x0]                          // .*.................
        // gap                                 // ...................
        mls v12.8H, v8.8H, v1.H[0]             // .......*...........
        // gap                                 // ...................
        // gap                                 // ...................
        // gap                                 // ...................
        // gap                                 // ...................
        // gap                                 // ...................
        sqrdmulh v9.8H, v13.8H, v6.H[1]        // ...........e.......
        sub v25.8H, v4.8H, v22.8H              // .............*.....
        // gap                                 // ...................
        // gap                                 // ...................
        add v16.8H, v4.8H, v22.8H              // ..............*....
        mul v22.8H, v13.8H, v6.H[0]            // ..........e........
        // gap                                 // ...................
        sub v24.8H, v14.8H, v12.8H             // ........*..........
        // gap                                 // ...................
        // gap                                 // ...................
        add v11.8H, v14.8H, v12.8H             // .........*.........
        str q25, [x0, #48]                     // ..................*
        sqrdmulh v8.8H, v26.8H, v6.H[1]        // ......e............
        str q16, [x0, #32]                     // .................*.
        // gap                                 // ...................
        // gap                                 // ...................
        mls v22.8H, v9.8H, v1.H[0]             // ............e......
        str q24, [x0, #16]                     // ................*..
        // gap                                 // ...................
        str q11, [x0], #4*16                   // ...............*...
        // gap                                 // ...................
        // gap                                 // ...................

        // original source code
        // ldr q0, [x1, #0]                       // .e................|.e................
        // ldr q8,  [x0]                          // ....*.............|....*.............
        // ldr q9,  [x0, #1*16]                   // ...e..............|...e..............
        // ldr q10, [x0, #2*16]                   // ..*...............|..*...............
        // ldr q11, [x0, #3*16]                   // e.................|e.................
        // mul v24.8h, v9.8h, v0.h[0]             // ..................*..................
        // sqrdmulh v9.8h, v9.8h, v0.h[1]         // .............e....|.............e....
        // mls v24.8h, v9.8h, v1.h[0]             // .....*............|.....*............
        // sub     v9.8h,    v8.8h, v24.8h        // ..........*.......|..........*.......
        // add     v8.8h,    v8.8h, v24.8h        // ...........*......|...........*......
        // mul v24.8h, v11.8h, v0.h[0]            // .........e........|.........e........
        // sqrdmulh v11.8h, v11.8h, v0.h[1]       // ......e...........|......e...........
        // mls v24.8h, v11.8h, v1.h[0]            // ...............e..|...............e..
        // sub     v11.8h,    v10.8h, v24.8h      // .......*..........|.......*..........
        // add     v10.8h,    v10.8h, v24.8h      // ........*.........|........*.........
        // str q8,  [x0], #4*16                   // .................*|.................*
        // str q9,  [x0, #-3*16]                  // ................*.|................*.
        // str q10, [x0, #-2*16]                  // ..............*...|..............*...
        // str q11, [x0, #-1*16]                  // ............*.....|............*.....

        sub count, count, #1
        cbnz count, start
        mul v4.8H, v26.8H, v6.H[0]        // *...........
        ldr q6, [x0, #32]                 // .*..........
        ldr q16, [x0]                     // ..*.........
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        mls v4.8H, v8.8H, v1.H[0]         // ...*........
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        sub v25.8H, v6.8H, v22.8H         // ....*.......
        add v6.8H, v6.8H, v22.8H          // .....*......
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        sub v14.8H, v16.8H, v4.8H         // ......*.....
        add v4.8H, v16.8H, v4.8H          // .......*....
        str q25, [x0, #48]                // ........*...
        str q6, [x0, #32]                 // .........*..
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        // gap                            // ............
        str q14, [x0, #16]                // ..........*.
        str q4, [x0], #4*16               // ...........*
        // gap                            // ............

        // original source code
        // mul v12.8H, v26.8H, v6.H[0]      // *...........
        // ldr q4, [x0, #32]                // .*..........
        // ldr q14, [x0]                    // ..*.........
        // mls v12.8H, v8.8H, v1.H[0]       // ...*........
        // sub v25.8H, v4.8H, v22.8H        // ....*.......
        // add v16.8H, v4.8H, v22.8H        // .....*......
        // sub v24.8H, v14.8H, v12.8H       // ......*.....
        // add v11.8H, v14.8H, v12.8H       // .......*....
        // str q25, [x0, #48]               // ........*...
        // str q16, [x0, #32]               // .........*..
        // str q24, [x0, #16]               // ..........*.
        // str q11, [x0], #4*16             // ...........*
